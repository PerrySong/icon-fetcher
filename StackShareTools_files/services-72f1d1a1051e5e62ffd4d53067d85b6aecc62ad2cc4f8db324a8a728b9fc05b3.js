/*! drop 0.5.4 */
/*! tether 0.6.5 */
function fileTypeLimit(t){return t=t.split(" "),function(e){if(null!==e.name){var n=e.name.split(".").pop();if(-1==t.indexOf(n))throw new Error("fileType")}}}
/*
 * to-markdown - an HTML to Markdown converter
 *
 * Copyright 2011, Dom Christie
 * Licenced under the MIT licence
 *
 */
if(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(){return function(){var t,e,n,i,r,o,s,a,l,c,h,u,d,f,p,g,m,v={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},y=[].slice;null==this.Tether&&(this.Tether={modules:[]}),h=function(t){var e,n,i,r;if("fixed"===(n=getComputedStyle(t).position))return t;for(void 0,e=t;e=e.parentNode;){try{i=getComputedStyle(e)}catch(o){}if(null==i)return e;if(/(auto|scroll)/.test(i.overflow+i["overflow-y"]+i["overflow-x"])&&("absolute"!==n||"relative"===(r=i.position)||"absolute"===r||"fixed"===r))return e}return document.body},m=0,f=function(){return m++},g={},l=function(t){var e,i,o,s,a;if(null==(o=t._tetherZeroElement)&&((o=t.createElement("div")).setAttribute("data-tether-id",f()),r(o.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(o),t._tetherZeroElement=o),e=o.getAttribute("data-tether-id"),null==g[e]){for(i in g[e]={},a=o.getBoundingClientRect())s=a[i],g[e][i]=s;n(function(){return g[e]=void 0})}return g[e]},s=function(t){var e,n,i,r,o,s,a;for(r in t===document?(n=document,t=document.documentElement):n=t.ownerDocument,i=n.documentElement,e={},a=t.getBoundingClientRect())s=a[r],e[r]=s;return o=l(n),e.top-=o.top,e.left-=o.left,null==e.width&&(e.width=document.body.scrollWidth-e.left-e.right),null==e.height&&(e.height=document.body.scrollHeight-e.top-e.bottom),e.top=e.top-i.clientTop,e.left=e.left-i.clientLeft,e.right=n.body.clientWidth-e.width-e.left,e.bottom=n.body.clientHeight-e.height-e.top,e},a=function(t){return t.offsetParent||document.documentElement},c=function(){var t,e,n,i,o;return(t=document.createElement("div")).style.width="100%",t.style.height="200px",e=document.createElement("div"),r(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),i=t.offsetWidth,e.style.overflow="scroll",i===(o=t.offsetWidth)&&(o=e.clientWidth),document.body.removeChild(e),{width:n=i-o,height:n}},r=function(t){var e,n,i,r,o,s,a;for(null==t&&(t={}),e=[],Array.prototype.push.apply(e,arguments),o=0,s=(a=e.slice(1)).length;o<s;o++)if(i=a[o])for(n in i)v.call(i,n)&&(r=i[n],t[n]=r);return t},d=function(t,e){var n,i,r,o,s;if(null!=t.classList){for(s=[],i=0,r=(o=e.split(" ")).length;i<r;i++)(n=o[i]).trim()&&s.push(t.classList.remove(n));return s}return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},e=function(t,e){var n,i,r,o,s;if(null!=t.classList){for(s=[],i=0,r=(o=e.split(" ")).length;i<r;i++)(n=o[i]).trim()&&s.push(t.classList.add(n));return s}return d(t,e),t.className+=" "+e},u=function(t,e){return null!=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},p=function(t,n,i){var r,o,s,a,l,c;for(o=0,a=i.length;o<a;o++)r=i[o],b.call(n,r)<0&&u(t,r)&&d(t,r);for(c=[],s=0,l=n.length;s<l;s++)r=n[s],u(t,r)?c.push(void 0):c.push(e(t,r));return c},i=[],n=function(t){return i.push(t)},o=function(){var t,e;for(e=[];t=i.pop();)e.push(t());return e},t=function(){function t(){}return t.prototype.on=function(t,e,n,i){var r;return null==i&&(i=!1),null==this.bindings&&(this.bindings={}),null==(r=this.bindings)[t]&&(r[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){var n,i,r;if(null!=(null!=(i=this.bindings)?i[t]:void 0)){if(null==e)return delete this.bindings[t];for(n=0,r=[];n<this.bindings[t].length;)this.bindings[t][n].handler===e?r.push(this.bindings[t].splice(n,1)):r.push(n++);return r}},t.prototype.trigger=function(){var t,e,n,i,r,o,s,a,l;if(n=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],null!=(s=this.bindings)?s[n]:void 0){for(r=0,l=[];r<this.bindings[n].length;)i=(a=this.bindings[n][r]).handler,e=a.ctx,o=a.once,i.apply(null!=e?e:this,t),o?l.push(this.bindings[n].splice(r,1)):l.push(r++);return l}},t}(),this.Tether.Utils={getScrollParent:h,getBounds:s,getOffsetParent:a,extend:r,addClass:e,removeClass:d,hasClass:u,updateClasses:p,defer:n,flush:o,uniqueId:f,Evented:t,getScrollBarSize:c}}.call(this),function(){var t,e,n,i,r,o,s,a,l,c,h,u,d,f,p,g,m,v,b,y,_,$,k,w,x,C,S,O=[].slice,T=function(t,e){return function(){return t.apply(e,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");S=(i=this.Tether).Utils,p=S.getScrollParent,S.getSize,S.getOuterSize,u=S.getBounds,d=S.getOffsetParent,c=S.extend,r=S.addClass,_=S.removeClass,w=S.updateClasses,l=S.defer,h=S.flush,f=S.getScrollBarSize,x=function(t,e,n){return null==n&&(n=1),t+n>=e&&e>=t-n},k=function(){var t,e,n,i,r;for(t=document.createElement("div"),n=0,i=(r=["transform","webkitTransform","OTransform","MozTransform","msTransform"]).length;n<i;n++)if(e=r[n],void 0!==t.style[e])return e}(),$=[],y=function(){var t,e;for(t=0,e=$.length;t<e;t++)$[t].position(!1);return h()},g=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},function(){var t,e,n,i,r,o,s,a,l;for(e=null,n=null,i=null,r=function(){return null!=n&&n>16?(n=Math.min(n-16,250),void(i=setTimeout(r,250))):null!=e&&g()-e<10?void 0:(null!=i&&(clearTimeout(i),i=null),e=g(),y(),n=g()-e)},l=[],o=0,s=(a=["resize","scroll","touchmove"]).length;o<s;o++)t=a[o],l.push(window.addEventListener(t,r))}(),t={center:"center",left:"right",right:"left"},e={middle:"middle",top:"bottom",bottom:"top"},n={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},a=function(n,i){var r,o;return r=n.left,o=n.top,"auto"===r&&(r=t[i.left]),"auto"===o&&(o=e[i.top]),{left:r,top:o}},s=function(t){var e,i;return{left:null!=(e=n[t.left])?e:t.left,top:null!=(i=n[t.top])?i:t.top}},o=function(){var t,e,n,i,r,o,s;for(n={top:0,left:0},r=0,o=(e=1<=arguments.length?O.call(arguments,0):[]).length;r<o;r++)i=(s=e[r]).top,t=s.left,"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof t&&(t=parseFloat(t,10)),n.top+=i,n.left+=t;return n},m=function(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t},v=b=function(t){var e;return{top:(e=t.split(" "))[0],left:e[1]}},C=function(){function t(t){var e,n,r,o;for(this.position=T(this.position,this),$.push(this),this.history=[],this.setOptions(t,!1),e=0,n=(r=i.modules).length;e<n;e++)null!=(o=r[e].initialize)&&o.call(this);this.position()}return t.modules=[],t.prototype.getClass=function(t){var e,n;return(null!=(e=this.options.classes)?e[t]:void 0)?this.options.classes[t]:!1!==(null!=(n=this.options.classes)?n[t]:void 0)?this.options.classPrefix?this.options.classPrefix+"-"+t:t:""},t.prototype.setOptions=function(t,e){var n,i,o,s,a,l;for(this.options=t,null==e&&(e=!0),n={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=c(n,this.options),a=this.options,this.element=a.element,this.target=a.target,this.targetModifier=a.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),o=0,s=(l=["element","target"]).length;o<s;o++){if(null==this[i=l[o]])throw new Error("Tether Error: Both element and target must be defined");null!=this[i].jquery?this[i]=this[i][0]:"string"==typeof this[i]&&(this[i]=document.querySelector(this[i]))}if(r(this.element,this.getClass("element")),r(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");if(this.targetAttachment=v(this.options.targetAttachment),this.attachment=v(this.options.attachment),this.offset=b(this.options.offset),this.targetOffset=b(this.options.targetOffset),null!=this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=p(this.target),!1!==this.options.enabled)return this.enable(e)},t.prototype.getTargetBounds=function(){var t,e,n,i,r,o,s,a;if(null==this.targetModifier)return u(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((i={height:(t=u(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(i.height,t.height-(pageYOffset-t.top)),i.height=Math.min(i.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,t.width-(pageXOffset-t.left)),i.width=Math.min(i.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i);case"scroll-handle":return(a=this.target)===document.body?(a=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=u(a),s=getComputedStyle(a),r=0,(a.scrollWidth>a.clientWidth||"scroll"===[s.overflow,s.overflowX]||this.target!==document.body)&&(r=15),i={width:15,height:.975*(n=t.height-parseFloat(s.borderTopWidth)-parseFloat(s.borderBottomWidth)-r)*(n/a.scrollHeight),left:t.left+t.width-parseFloat(s.borderLeftWidth)-15},e=0,n<408&&this.target===document.body&&(e=-11e-5*Math.pow(n,2)-.00727*n+22.58),this.target!==document.body&&(i.height=Math.max(i.height,24)),o=this.target.scrollTop/(a.scrollHeight-n),i.top=o*(n-i.height-e)+t.top+parseFloat(s.borderTopWidth),this.target===document.body&&(i.height=Math.max(i.height,24)),i}},t.prototype.clearCache=function(){return this._cache={}},t.prototype.cache=function(t,e){return null==this._cache&&(this._cache={}),null==this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},t.prototype.enable=function(t){if(null==t&&(t=!0),r(this.target,this.getClass("enabled")),r(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t)return this.position()},t.prototype.disable=function(){if(_(this.target,this.getClass("enabled")),_(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent)return this.scrollParent.removeEventListener("scroll",this.position)},t.prototype.destroy=function(){var t,e,n,i;for(this.disable(),i=[],t=e=0,n=$.length;e<n;t=++e){if($[t]===this){$.splice(t,1);break}i.push(void 0)}return i},t.prototype.updateAttachClasses=function(t,e){var n,i,r,o,s,a,c,h,u,d=this;for(null==t&&(t=this.attachment),null==e&&(e=this.targetAttachment),o=["left","top","bottom","right","middle","center"],(null!=(u=this._addAttachClasses)?u.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),n=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left),i=[],s=0,c=o.length;s<c;s++)r=o[s],i.push(this.getClass("element-attached")+"-"+r);for(a=0,h=o.length;a<h;a++)r=o[a],i.push(this.getClass("target-attached")+"-"+r);return l(function(){if(null!=d._addAttachClasses)return w(d.element,d._addAttachClasses,i),w(d.target,d._addAttachClasses,i),d._addAttachClasses=void 0})},t.prototype.position=function(t){var e,n,r,l,c,p,g,v,b,y,_,$,k,w,x,C,S,O,T,E,P,B,L,M,j,A,z,N,H,W,I,F,R,D=this;if(null==t&&(t=!0),this.enabled){for(this.clearCache(),O=a(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,O),L=(e=this.cache("element-bounds",function(){return u(D.element)})).width,n=e.height,0===L&&0===n&&null!=this.lastSize?(L=(N=this.lastSize).width,n=N.height):this.lastSize={width:L,height:n},P=E=this.cache("target-bounds",function(){return D.getTargetBounds()}),g=m(s(this.attachment),{width:L,height:n}),T=m(s(O),P),l=m(this.offset,{width:L,height:n}),c=m(this.targetOffset,P),g=o(g,l),T=o(T,c),r=E.left+T.left-g.left,B=E.top+T.top-g.top,M=0,A=(H=i.modules).length;M<A;M++)if(null!=(k=H[M].position.call(this,{left:r,top:B,targetAttachment:O,targetPos:E,attachment:this.attachment,elementPos:e,offset:g,targetOffset:T,manualOffset:l,manualTargetOffset:c,scrollbarSize:C}))&&"object"==typeof k){if(!1===k)return!1;B=k.top,r=k.left}if(p={page:{top:B,left:r},viewport:{top:B-pageYOffset,bottom:pageYOffset-B-n+innerHeight,left:r-pageXOffset,right:pageXOffset-r-L+innerWidth}},document.body.scrollWidth>window.innerWidth&&(C=this.cache("scrollbar-size",f),p.viewport.bottom-=C.height),document.body.scrollHeight>window.innerHeight&&(C=this.cache("scrollbar-size",f),p.viewport.right-=C.width),(""!==(W=document.body.style.position)&&"static"!==W||""!==(I=document.body.parentElement.style.position)&&"static"!==I)&&(p.page.bottom=document.body.scrollHeight-B-n,p.page.right=document.body.scrollWidth-r-L),!1!==(null!=(F=this.options.optimizations)?F.moveElement:void 0)&&null==this.targetModifier){for(b=this.cache("target-offsetparent",function(){return d(D.target)}),$=this.cache("target-offsetparent-bounds",function(){return u(b)}),_=getComputedStyle(b),getComputedStyle(this.element),y=$,v={},j=0,z=(R=["Top","Left","Bottom","Right"]).length;j<z;j++)v[(S=R[j]).toLowerCase()]=parseFloat(_["border"+S+"Width"]);$.right=document.body.scrollWidth-$.left-y.width+v.right,$.bottom=document.body.scrollHeight-$.top-y.height+v.bottom,p.page.top>=$.top+v.top&&p.page.bottom>=$.bottom&&p.page.left>=$.left+v.left&&p.page.right>=$.right&&(x=b.scrollTop,w=b.scrollLeft,p.offset={top:p.page.top-$.top+x-v.top,left:p.page.left-$.left+w-v.left})}return this.move(p),this.history.unshift(p),this.history.length>3&&this.history.pop(),t&&h(),!0}},t.prototype.move=function(t){var e,n,i,r,o,s,a,h,u,f,p,g,m,v,b,y,_,$=this;if(null!=this.element.parentNode){for(f in h={},t)for(r in h[f]={},t[f]){for(i=!1,v=0,b=(y=this.history).length;v<b;v++)if(a=y[v],!x(null!=(_=a[f])?_[r]:void 0,t[f][r])){i=!0;break}i||(h[f][r]=!0)}for(r in e={top:"",left:"",right:"",bottom:""},u=function(t,n){var i,r,o;return!1===(null!=(o=$.options.optimizations)?o.gpu:void 0)?(t.top?e.top=n.top+"px":e.bottom=n.bottom+"px",t.left?e.left=n.left+"px":e.right=n.right+"px"):(t.top?(e.top=0,r=n.top):(e.bottom=0,r=-n.bottom),t.left?(e.left=0,i=n.left):(e.right=0,i=-n.right),e[k]="translateX("+Math.round(i)+"px) translateY("+Math.round(r)+"px)","msTransform"!==k?e[k]+=" translateZ(0)":void 0)},o=!1,(h.page.top||h.page.bottom)&&(h.page.left||h.page.right)?(e.position="absolute",u(h.page,t.page)):(h.viewport.top||h.viewport.bottom)&&(h.viewport.left||h.viewport.right)?(e.position="fixed",u(h.viewport,t.viewport)):null!=h.offset&&h.offset.top&&h.offset.left?(e.position="absolute",s=this.cache("target-offsetparent",function(){return d($.target)}),d(this.element)!==s&&l(function(){return $.element.parentNode.removeChild($.element),s.appendChild($.element)}),u(h.offset,t.offset),o=!0):(e.position="absolute",u({top:!0,left:!0},t.page)),o||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},g=!1,e)p=e[r],""===(n=this.element.style[r])||""===p||"top"!==r&&"left"!==r&&"bottom"!==r&&"right"!==r||(n=parseFloat(n),p=parseFloat(p)),n!==p&&(g=!0,m[r]=e[r]);return g?l(function(){return c($.element.style,m)}):void 0}},t}(),i.position=y,this.Tether=c(C,i)}.call(this),function(){var t,e,n,i,r,o,s,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};(s=this.Tether.Utils).getOuterSize,r=s.getBounds,s.getSize,n=s.extend,o=s.updateClasses,e=s.defer,t=["left","top","right","bottom"],i=function(e,n){var i,o,s,a,l,c,h;if("scrollParent"===n?n=e.scrollParent:"window"===n&&(n=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),n===document&&(n=n.documentElement),null!=n.nodeType)for(o=a=r(n),l=getComputedStyle(n),n=[o.left,o.top,a.width+o.left,a.height+o.top],i=c=0,h=t.length;c<h;i=++c)"Top"===(s=(s=t[i])[0].toUpperCase()+s.substr(1))||"Left"===s?n[i]+=parseFloat(l["border"+s+"Width"]):n[i]-=parseFloat(l["border"+s+"Width"]);return n},this.Tether.modules.push({position:function(s){var l,c,h,u,d,f,p,g,m,v,b,y,_,$,k,w,x,C,S,O,T,E,P,B,L,M,j,A,z,N,H,W,I,F,R,D,q,Y,U,G,X,Q,K,J,V,Z,tt=this;if(L=s.top,b=s.left,O=s.targetAttachment,!this.options.constraints)return!0;for(function(e){var n,i,r,o;for(tt.removeClass(e),o=[],i=0,r=t.length;i<r;i++)n=t[i],o.push(tt.removeClass(e+"-"+n));return o},v=(U=this.cache("element-bounds",function(){return r(tt.element)})).height,0===(M=U.width)&&0===v&&null!=this.lastSize&&(M=(G=this.lastSize).width,v=G.height),T=(E=this.cache("target-bounds",function(){return tt.getTargetBounds()})).height,P=E.width,S={},m={},c=[this.getClass("pinned"),this.getClass("out-of-bounds")],j=0,H=(X=this.options.constraints).length;j<H;j++)(g=X[j]).outOfBoundsClass&&c.push(g.outOfBoundsClass),g.pinnedClass&&c.push(g.pinnedClass);for(A=0,W=c.length;A<W;A++)for(p=c[A],z=0,I=(Q=["left","top","right","bottom"]).length;z<I;z++)C=Q[z],c.push(p+"-"+C);for(l=[],S=n({},O),m=n({},this.attachment),N=0,F=(K=this.options.constraints).length;N<F;N++){if(B=(g=K[N]).to,h=g.attachment,k=g.pin,null==h&&(h=""),a.call(h," ")>=0?(f=(J=h.split(" "))[0],d=J[1]):d=f=h,u=i(this,B),"target"!==f&&"both"!==f||(L<u[1]&&"top"===S.top&&(L+=T,S.top="bottom"),L+v>u[3]&&"bottom"===S.top&&(L-=T,S.top="top")),"together"===f&&(L<u[1]&&"top"===S.top&&("bottom"===m.top?(L+=T,S.top="bottom",L+=v,m.top="top"):"top"===m.top&&(L+=T,S.top="bottom",L-=v,m.top="bottom")),L+v>u[3]&&"bottom"===S.top&&("top"===m.top?(L-=T,S.top="top",L-=v,m.top="bottom"):"bottom"===m.top&&(L-=T,S.top="top",L+=v,m.top="top")),"middle"===S.top&&(L+v>u[3]&&"top"===m.top?(L-=v,m.top="bottom"):L<u[1]&&"bottom"===m.top&&(L+=v,m.top="top"))),"target"!==d&&"both"!==d||(b<u[0]&&"left"===S.left&&(b+=P,S.left="right"),b+M>u[2]&&"right"===S.left&&(b-=P,S.left="left")),"together"===d&&(b<u[0]&&"left"===S.left?"right"===m.left?(b+=P,S.left="right",b+=M,m.left="left"):"left"===m.left&&(b+=P,S.left="right",b-=M,m.left="right"):b+M>u[2]&&"right"===S.left?"left"===m.left?(b-=P,S.left="left",b-=M,m.left="right"):"right"===m.left&&(b-=P,S.left="left",b+=M,m.left="left"):"center"===S.left&&(b+M>u[2]&&"left"===m.left?(b-=M,m.left="right"):b<u[0]&&"right"===m.left&&(b+=M,m.left="left"))),"element"!==f&&"both"!==f||(L<u[1]&&"bottom"===m.top&&(L+=v,m.top="top"),L+v>u[3]&&"top"===m.top&&(L-=v,m.top="bottom")),"element"!==d&&"both"!==d||(b<u[0]&&"right"===m.left&&(b+=M,m.left="left"),b+M>u[2]&&"left"===m.left&&(b-=M,m.left="right")),"string"==typeof k?k=function(){var t,e,n,i;for(i=[],e=0,t=(n=k.split(",")).length;e<t;e++)$=n[e],i.push($.trim());return i}():!0===k&&(k=["top","left","right","bottom"]),k||(k=[]),w=[],y=[],L<u[1]&&(a.call(k,"top")>=0?(L=u[1],w.push("top")):y.push("top")),L+v>u[3]&&(a.call(k,"bottom")>=0?(L=u[3]-v,w.push("bottom")):y.push("bottom")),b<u[0]&&(a.call(k,"left")>=0?(b=u[0],w.push("left")):y.push("left")),b+M>u[2]&&(a.call(k,"right")>=0?(b=u[2]-M,w.push("right")):y.push("right")),w.length)for(x=null!=(V=this.options.pinnedClass)?V:this.getClass("pinned"),l.push(x),q=0,R=w.length;q<R;q++)C=w[q],l.push(x+"-"+C);if(y.length)for(_=null!=(Z=this.options.outOfBoundsClass)?Z:this.getClass("out-of-bounds"),l.push(_),Y=0,D=y.length;Y<D;Y++)C=y[Y],l.push(_+"-"+C);(a.call(w,"left")>=0||a.call(w,"right")>=0)&&(m.left=S.left=!1),(a.call(w,"top")>=0||a.call(w,"bottom")>=0)&&(m.top=S.top=!1),S.top===O.top&&S.left===O.left&&m.top===this.attachment.top&&m.left===this.attachment.left||this.updateAttachClasses(m,S)}return e(function(){return o(tt.target,l,c),o(tt.element,l,c)}),{top:L,left:b}}})}.call(this),function(){var t,e,n,i;i=this.Tether.Utils,e=i.getBounds,n=i.updateClasses,t=i.defer,this.Tether.modules.push({position:function(i){var r,o,s,a,l,c,h,u,d,f,p,g,m,v,b,y,_,$,k,w,x,C,S,O=this;if(f=i.top,l=i.left,a=f+(k=this.cache("element-bounds",function(){return e(O.element)})).height,c=l+k.width,r=[],f<=(d=this.getTargetBounds()).bottom&&a>=d.top)for(p=0,b=(w=["left","right"]).length;p<b;p++)(x=d[h=w[p]])!==l&&x!==c||r.push(h);if(l<=d.right&&c>=d.left)for(g=0,y=(C=["top","bottom"]).length;g<y;g++)(S=d[h=C[g]])!==f&&S!==a||r.push(h);for(o=[],u=["left","top","right","bottom"],(s=[]).push(this.getClass("abutted")),m=0,_=u.length;m<_;m++)h=u[m],s.push(this.getClass("abutted")+"-"+h);for(r.length&&o.push(this.getClass("abutted")),v=0,$=r.length;v<$;v++)h=r[v],o.push(this.getClass("abutted")+"-"+h);return t(function(){return n(O.target,o,s),n(O.element,o,s)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(t){var e,n,i,r,o,s;if(o=t.top,e=t.left,this.options.shift)return"string"==typeof(n=function(t){return"function"==typeof t?t.call(this,{top:o,left:e}):t}(this.options.shift))?((n=n.split(" "))[1]||(n[1]=n[0]),r=n[0],i=n[1],r=parseFloat(r,10),i=parseFloat(i,10)):(r=(s=[n.top,n.left])[0],i=s[1]),{top:o+=r,left:e+=i}}})}.call(this),this.Tether}),function(){var t,e,n,i,r,o,s,a,l,c,h,u,d,f,p,g,m,v={}.hasOwnProperty,b=function(t,e){function n(){this.constructor=t}for(var i in e)v.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},y=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};for(c in m=Tether.Utils,a=m.extend,n=m.addClass,h=m.removeClass,l=m.hasClass,t=m.Evented,f="ontouchstart"in document.documentElement,r=["click"],f&&r.push("touchstart"),p="",g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"})s=g[c],void 0!==document.createElement("p").style[c]&&(p=s);d=function(t){var e,n,i,r;return e=(i=t.split(" "))[0],n=i[1],"left"!==e&&"right"!==e||(e=(r=[n,e])[0],n=r[1]),[e,n].join(" ")},e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},i={},u=function(t,e){var n,i;for(i=[];-1!==(n=t.indexOf(e));)i.push(t.splice(n,1));return i},o=function(s){var c,f,g,m;return null==s&&(s={}),a(g=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(c,arguments,function(){})},{createContext:o,drops:[],defaults:{}}),a(g,f={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}},s),a(g.defaults,f.defaults,s.defaults),null==i[m=g.classPrefix]&&(i[m]=[]),g.updateBodyClasses=function(){var t,e,r,o;for(t=!1,e=0,r=(o=i[g.classPrefix]).length;e<r;e++)if(o[e].isOpened()){t=!0;break}return t?n(document.body,g.classPrefix+"-open"):h(document.body,g.classPrefix+"-open")},c=function(){function o(t){if(this.options=t,this.options=a({},g.defaults,this.options),this.target=this.options.target,null==this.target)throw new Error("Drop Error: You must provide a target.");this.options.classes&&n(this.target,this.options.classes),g.drops.push(this),i[g.classPrefix].push(this),this._boundEvents=[],this.setupElements(),this.setupEvents(),this.setupTether()}return b(o,t),o.prototype._on=function(t,e,n){return this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)},o.prototype.setupElements=function(){var t,e=this;return this.drop=document.createElement("div"),n(this.drop,g.classPrefix),this.options.classes&&n(this.drop,this.options.classes),this.content=document.createElement("div"),n(this.content,g.classPrefix+"-content"),"function"==typeof this.options.content?((t=function(){var t;if("string"==typeof(t=e.options.content.call(e,e)))return e.content.innerHTML=t;if("object"==typeof t)return e.content.appendChild(t);throw new Error("Drop Error: Content function should return a string or HTMLElement.")})(),this.on("open",t.bind(this))):"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content,this.drop.appendChild(this.content)},o.prototype.setupTether=function(){var t,n;if((n=this.options.position.split(" "))[0]=e[n[0]],n=n.join(" "),t=[],this.options.constrainToScrollParent?t.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):t.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?t.push({to:"window",attachment:"together"}):t.push({to:"window"}),s={element:this.drop,target:this.target,attachment:d(n),targetAttachment:d(this.options.position),classPrefix:g.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:t},!1!==this.options.tetherOptions)return this.tether=new Tether(a({},s,this.options.tetherOptions))},o.prototype.setupEvents=function(){var t,e,n,i,o,s,a,l,c,h,u=this;if(this.options.openOn){if("always"!==this.options.openOn){if(n=this.options.openOn.split(" "),y.call(n,"click")>=0)for(o=function(t){return u.toggle(),t.preventDefault()},e=function(t){if(u.isOpened()&&t.target!==u.drop&&!u.drop.contains(t.target)&&t.target!==u.target&&!u.target.contains(t.target))return u.close()},c=0,h=r.length;c<h;c++)t=r[c],this._on(this.target,t,o),this._on(document,t,e);return y.call(n,"hover")>=0?(i=!1,l=function(){return i=!0,u.open()},a=null,s=function(){return i=!1,null!=a&&clearTimeout(a),a=setTimeout(function(){return i||u.close(),a=null},50)},this._on(this.target,"mouseover",l),this._on(this.drop,"mouseover",l),this._on(this.target,"mouseout",s),this._on(this.drop,"mouseout",s)):void 0}setTimeout(this.open.bind(this))}},o.prototype.isOpened=function(){return l(this.drop,g.classPrefix+"-open")},o.prototype.toggle=function(){return this.isOpened()?this.close():this.open()},o.prototype.open=function(){var t,e,i=this;if(!this.isOpened())return this.drop.parentNode||document.body.appendChild(this.drop),null!=(t=this.tether)&&t.enable(),n(this.drop,g.classPrefix+"-open"),n(this.drop,g.classPrefix+"-open-transitionend"),setTimeout(function(){return n(i.drop,g.classPrefix+"-after-open")}),null!=(e=this.tether)&&e.position(),this.trigger("open"),g.updateBodyClasses()},o.prototype.close=function(){var t,e,n=this;if(this.isOpened())return h(this.drop,g.classPrefix+"-open"),h(this.drop,g.classPrefix+"-after-open"),this.drop.addEventListener(p,t=function(){return l(n.drop,g.classPrefix+"-open")||h(n.drop,g.classPrefix+"-open-transitionend"),n.drop.removeEventListener(p,t)}),this.trigger("close"),null!=(e=this.tether)&&e.disable(),g.updateBodyClasses(),this.options.remove?this.remove():void 0},o.prototype.remove=function(){var t;return this.close(),null!=(t=this.drop.parentNode)?t.removeChild(this.drop):void 0},o.prototype.position=function(){var t;if(this.isOpened())return null!=(t=this.tether)?t.position():void 0},o.prototype.destroy=function(){var t,e,n,r,o,s,a,l;for(this.remove(),null!=(s=this.tether)&&s.destroy(),r=0,o=(a=this._boundEvents).length;r<o;r++)t=(l=a[r]).element,e=l.event,n=l.handler,t.removeEventListener(e,n);return this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,u(i[g.classPrefix],this),u(g.drops,this)},o}(),g},window.Drop=o(),document.addEventListener("DOMContentLoaded",function(){return Drop.updateBodyClasses()})}.call(this),$(document).ready(function(){$(document).on("ajax:success",".toggle-favorite-stack",function(t){var e=t.originalEvent.detail,n=e[0];e[1],e[2];n.result?($(this).addClass("favorited"),$(this).children(".trending-star").css("color","#0690fa"),$(".stack-fave-"+n.id).css("color","#0690fa"),$("#stack-"+n.id).replaceWith('<div class="star-count" id="stack-'+n.id+'" style="color:#0690fa">'+n.count+"</div>"),$(".stack-fave-"+n.id).text(n.count)):($(this).removeClass("favorited"),$(this).children(".trending-star").css("color","black"),$(".stack-fave-"+n.id).css("color","black"),$("#stack-"+n.id).replaceWith('<div class="star-count" id="stack-'+n.id+'">'+n.count+"</div>"),$(".stack-fave-"+n.id).text(n.count))}),$(document).on("ajax:success",".toggle-favorite-service",function(t){var e=t.originalEvent.detail,n=e[0];e[1],e[2];n.result?($(this).find("i").css("color","#0690fa"),$("#service-"+n.id).replaceWith('<div class="star-count" id="service-'+n.id+'" style="color:#0690fa">'+n.count+"</div>")):($(this).find("i").css("color","black"),$("#service-"+n.id).replaceWith('<div class="star-count" id="service-'+n.id+'">'+n.count+"</div>"))}),$(document).on("ajax:success",".toggle-favorite-service-button",function(t){const e=t.originalEvent.detail[0],n=e.count,i=$(this),r=i.find(".tool-score-number"),o=i.find(".tool-score-button");e.result?(o.addClass("favorite"),r.length&&n&&(1e3==n?r.text("1K"):n<1e3&&r.text(n))):(o.removeClass("favorite"),r.length&&n&&n<1e3&&r.text(n))})}),$(document).ready(function(){$(".upvote-comment").on("ajax:success",function(t){var e=t.originalEvent.detail,n=e[0];e[1],e[2];n.upvote?(vote_value=parseInt($(this).next().text(),10)+1,$(this).find("span").css("color","#0690fa"),$("#reason-"+n.id).replaceWith('<span class="reason-count" id="reason-'+n.id+'" style="color:#0690fa">'+n.count+"</div>")):(vote_value=parseInt($(this).next().text(),10)-1,$(this).find("span").css("color","black"),$("#reason-"+n.id).replaceWith('<span class="reason-count" id="reason-'+n.id+'">'+n.count+"</div>")),$(this).next().text(vote_value)}),$(".upvote-review").on("ajax:success",function(t){var e=t.originalEvent.detail,n=e[0];e[1],e[2];n.upvote?vote_value=parseInt($(this).next().text(),10)+1:vote_value=parseInt($(this).next().text(),10)-1,$(this).next().text(vote_value)})}),$(document).ready(function(){if("undefined"!=typeof category_landing_page&&category_landing_page){var t=$(".has-masonry-layers")[0],e=new Masonry(t,{itemSelector:".stacked-service"}),n=ordered_service_ids;function r(){$("a.i-use-this").removeClass("disabled"),$(".i-use-this").each(function(){var t=$(this).data("service");new Drop({target:$(this)[0],openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToWindow:!1,constrainToScrollParent:!1,position:"bottom center",content:function(){return $('.i-use-this-content[data-service="'+t+'"]').length?$('.i-use-this-content[data-service="'+t+'"]').html():""}})}),$(".btn").button()}$(".load-more-category-stacks").click(function(){$(this).addClass("disabled");var i=$(this),o=n.slice(0,9);n=n.slice(10);var s=$(".load-more-category-stacks").data("category");$.post("/"+s+"/load-more",{ids:o},function(n){$(t).append($(n)[0]),$("#list").append($(n)[2]),e.reloadItems(),e.layout(),i.removeClass("disabled"),r(),ReactOnRails.reactOnRailsPageLoaded()})})}else if("undefined"!=typeof layer_landing_page&&layer_landing_page){t=$(".has-masonry-layers")[0],e=new Masonry(t,{itemSelector:".stacked-service"}),n=ordered_service_ids;function r(){$("a.i-use-this").removeClass("disabled"),$(".i-use-this").each(function(){var t=$(this).data("service");new Drop({target:$(this)[0],openOn:"click",classes:"drop-theme-arrows-bounce-dark",constrainToWindow:!1,constrainToScrollParent:!1,position:"bottom center",content:function(){return $('.i-use-this-content[data-service="'+t+'"]').length?$('.i-use-this-content[data-service="'+t+'"]').html():""}})}),$(".btn").button()}$(".load-more-layer-stacks").click(function(){$(this).addClass("disabled");var i=$(this),o=n.slice(0,9);n=n.slice(10);var s=$(".load-more-layer-stacks").data("layer");$.post("/"+s+"/load-more",{ids:o},function(n){$(t).append($(n)[0]),$("#list").append($(n)[2]),e.reloadItems(),e.layout(),i.removeClass("disabled"),r(),ReactOnRails.reactOnRailsPageLoaded()})})}$(".load-more-stacks").click(function(){$(this).addClass("disabled");var t=$(this),e=t.data("pageNumber"),n=t.data("tab");$.get("/stacks",{page:e,tab:n},function(n){var i=$($(n)[0]).find(".container #stack-card");window.stack_masonry.append($(i)).masonry("appended",$(i)),console.log(i.length),i.length<30?t.addClass("disabled"):t.removeClass("disabled"),t.data("pageNumber",e+1)})}),$(document).on("click",".trending-tab-load-more-services",function(t){t.preventDefault();var e=$(this),n=e.data("pagenumber"),r=e.data("tab");$.get("/tools/"+r,{page:n},function(t){for(new_react_components=$(".js-react-on-rails-component",t),new_data=$(t).find(".trending-load-more").html(),$(".trending-load-more").append(new_data),i=0,len=new_react_components.length;i<len;i++)el=new_react_components[i],component_name=el.getAttribute("data-component-name"),id=el.getAttribute("data-dom-id"),props=JSON.parse(el.innerHTML),ReactOnRails.render(component_name,props,id);t.length<40?e.addClass("disabled"):e.removeClass("disabled"),e.data("pagenumber",n+1)})}),$("#submit-featured-url").click(function(){window.location.href="/featured-scan?url="+$("#featured-url").val()})}),
// Copyright (c) 2009-2010 Dominic Baggott
// Copyright (c) 2009-2010 Ash Berlin
// Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)
function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var t=require("util");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(t){for(var e=0,n=-1;-1!==(n=t.indexOf("\n",n+1));)e++;return e}function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(t){if("string"==typeof t)return r(t);var e=t.shift(),n={},i=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(n=t.shift());t.length;)i.push(o(t.shift()));var s="";for(var a in n)s+=" "+a+'="'+r(n[a])+'"';return"img"===e||"br"===e||"hr"===e?"<"+e+s+"/>":"<"+e+s+">"+i.join("")+"</"+e+">"}function s(t,e,n){var i;n=n||{};var r=t.slice(0);"function"==typeof n.preprocessTreeNode&&(r=n.preprocessTreeNode(r,e));var o=p(r);if(o){for(i in r[1]={},o)r[1][i]=o[i];o=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",o&&delete o.references;break;case"code_block":r[0]="pre",i=o?2:1;var a=["code"];a.push.apply(a,r.splice(i,r.length-i)),r[i]=a;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":if(r[0]="a",!(l=e[o.ref]))return o.original;delete o.ref,o.href=l.href,l.title&&(o.title=l.title),delete o.original;break;case"img_ref":var l;if(r[0]="img",!(l=e[o.ref]))return o.original;delete o.ref,o.src=l.href,l.title&&(o.title=l.title),delete o.original}if(i=1,o){for(var c in r[1]){i=2;break}1===i&&r.splice(i,1)}for(;i<r.length;++i)r[i]=s(r[i],e,n);return r}function a(t){for(var e=p(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(a(t[e]),++e)}function l(t,e){function n(t){this.len_after=t,this.name="close_"+e}var i=t+"_state",r="strong"===t?"em_state":"strong_state";return function(o){if(this[i][0]===e)return this[i].shift(),[o.length,new n(o.length-e.length)];var s=this[r].slice(),a=this[i].slice();this[i].unshift(e);var l=this.processInline(o.substr(e.length)),c=l[l.length-1];this[i].shift();return c instanceof n?(l.pop(),[o.length-c.len_after,[t].concat(l)]):(this[r]=s,this[i]=a,[e.length,e])}}function c(t){for(var e=t.split(""),n=[""],i=!1;e.length;){var r=e.shift();switch(r){case" ":i?n[n.length-1]+=r:n.push("");break;case"'":case'"':i=!i;break;case"\\":r=e.shift();default:n[n.length-1]+=r}}return n}var h={mk_block:function(t,i,r){1===arguments.length&&(i="\n\n");var o=new String(t);return o.trailing=i,o.inspect=n,o.toSource=e,r!==undefined&&(o.lineNumber=r),o}},u=h.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};Array.prototype.forEach?h.forEach=function(t,e,n){return t.forEach(e,n)}:h.forEach=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||t,t[i],i,t)},h.isEmpty=function(t){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},h.extract_attr=function(t){return u(t)&&t.length>1&&"object"==typeof t[1]&&!u(t[1])?t[1]:undefined};var d=function(t){switch(typeof t){case"undefined":this.dialect=d.dialects.Gruber;break;case"object":this.dialect=t;break;default:if(!(t in d.dialects))throw new Error("Unknown Markdown dialect '"+String(t)+"'");this.dialect=d.dialects[t]}this.em_state=[],this.strong_state=[],this.debug_indent=""};d.dialects={};var f=d.mk_block=h.mk_block;u=h.isArray;d.parse=function(t,e){return new d(e).toTree(t)},d.prototype.split_blocks=function(t){t=t.replace(/(\r\n|\n|\r)/g,"\n");var e,n=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,r=[],o=1;for(null!==(e=/^(\s*\n)/.exec(t))&&(o+=i(e[0]),n.lastIndex=e[0].length);null!==(e=n.exec(t));)"\n#"===e[2]&&(e[2]="\n",n.lastIndex--),r.push(f(e[1],e[2],o)),o+=i(e[0]);return r},d.prototype.processBlock=function(t,e){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var r=0;r<i.length;r++){var o=n[i[r]].call(this,t,e);if(o)return(!u(o)||o.length>0&&!u(o[0]))&&this.debug(i[r],"didn't return a proper array"),o}return[]},d.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},d.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),i=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var r=this.processBlock(n.shift(),n);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{e&&(this.tree=i)}},d.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&console.log},d.prototype.loop_re_over_block=function(t,e,n){for(var i,r=e.valueOf();r.length&&null!==(i=t.exec(r));)r=r.substr(i[0].length),n.call(this,i);return r},d.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!==n&&"__call__"!==n&&e.push(n);t.__order__=e},d.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1===n.length?i:"(?:"+i+")")}e=e.join("|"),t.__patterns__=e;var r=t.__call__;t.__call__=function(t,n){return n!==undefined?r.call(this,t,n):r.call(this,t,e)}};var p=h.extract_attr;d.renderJsonML=function(t,e){(e=e||{}).root=e.root||!1;var n=[];if(e.root)n.push(o(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)n.push(o(t.shift()));return n.join("\n\n")},d.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var i=p(t),r={};i&&i.references&&(r=i.references);var o=s(t,r,n);return a(o),o},d.toHTML=function(t,e,n){var i=this.toHTMLTree(t,e,n);return this.renderJsonML(i)};var g={inline_until_char:function(t,e){for(var n=0,i=[];;){if(t.charAt(n)===e)return[++n,i];if(n>=t.length)return null;var r=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=r[0],i.push.apply(i,r.slice(1))}},subclassDialect:function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}}},m=h.forEach,v=(p=h.extract_attr,f=h.mk_block,h.isEmpty),b=g.inline_until_char,y={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!n)return undefined;var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!n)return undefined;var i=["header",{level:"="===n[2]?1:2},n[1]];return n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]},code:function(t,e){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(!t.match(i))return undefined;t:for(;;){var r=this.loop_re_over_block(i,t.valueOf(),function(t){n.push(t[1])});if(r.length){e.unshift(f(r,t.trailing));break t}if(!e.length)break t;if(!e[0].match(i))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!n)return undefined;var i=[["hr"]];if(n[1]){var r=f(n[1],"",t.lineNumber);i.unshift.apply(i,this.toTree(r,[]))}return n[3]&&e.unshift(f(n[3],t.trailing,t.lineNumber+1)),i},lists:function(){function t(t){return new RegExp("(?:^("+l+"{0,"+t+"} {0,3})("+o+")\\s+)|(^"+l+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function n(t,e,n,i){if(e)t.push(["para"].concat(n));else{var r=t[t.length-1]instanceof Array&&"para"===t[t.length-1][0]?t[t.length-1]:t;i&&t.length>1&&n.unshift(i);for(var o=0;o<n.length;o++){var s=n[o];"string"==typeof s&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=s:r.push(s)}}}function i(t,e){for(var n=new RegExp("^("+l+"{"+t+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+t+"}","gm"),r=[];e.length>0&&n.exec(e[0]);){var o=e.shift(),s=o.replace(i,"");r.push(f(s,o.trailing,o.lineNumber))}return r}function r(t,e,n){var i=t.list,r=i[i.length-1];if(!(r[1]instanceof Array&&"para"===r[1][0]))if(e+1===n.length)r.push(["para"].concat(r.splice(1,r.length-1)));else{var o=r.pop();r.push(["para"].concat(r.splice(1,r.length-1)),o)}}var o="[*+-]|\\d+\\.",s=/[*+-]/,a=new RegExp("^( {0,3})("+o+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(o,l){function c(t){var e=s.exec(t[2])?["bulletlist"]:["numberlist"];return f.push({list:e,indent:t[1]}),e}var h=o.match(a);if(!h)return undefined;for(var u,d,f=[],p=c(h),g=!1,v=[f[0].list];;){for(var b=o.split(/(?=\n)/),y="",_="",$=0;$<b.length;$++){_="";var k=b[$].replace(/^\n/,function(t){return _=t,""}),w=t(f.length);if((h=k.match(w))[1]!==undefined){y.length&&(n(u,g,this.processInline(y),_),g=!1,y=""),h[1]=e(h[1]);var x=Math.floor(h[1].length/4)+1;if(x>f.length)p=c(h),u.push(p),u=p[1]=["listitem"];else{var C=!1;for(d=0;d<f.length;d++)if(f[d].indent===h[1]){p=f[d].list,f.splice(d+1,f.length-(d+1)),C=!0;break}C||(++x<=f.length?(f.splice(x,f.length-x),p=f[x-1].list):(p=c(h),u.push(p))),u=["listitem"],p.push(u)}_=""}k.length>h[0].length&&(y+=_+k.substr(h[0].length))}y.length&&(n(u,g,this.processInline(y),_),g=!1,y="");var S=i(f.length,l);S.length>0&&(m(f,r,this),u.push.apply(u,this.toTree(S,[])));var O=l[0]&&l[0].valueOf()||"";if(!O.match(a)&&!O.match(/^ /))break;o=l.shift();var T=this.dialect.block.horizRule(o,l);if(T){v.push.apply(v,T);break}m(f,r,this),g=!0}return v}}(),blockquote:function(t,e){if(!t.match(/^>/m))return undefined;var n=[];if(">"!==t[0]){for(var i=t.split(/\n/),r=[],o=t.lineNumber;i.length&&">"!==i[0][0];)r.push(i.shift()),o++;var s=f(r.join("\n"),"\n",t.lineNumber);n.push.apply(n,this.processBlock(s,[])),t=f(i.join("\n"),t.trailing,o)}for(;e.length&&">"===e[0][0];){var a=e.shift();t=f(t+t.trailing+a,a.trailing,t.lineNumber)}var l=t.replace(/^> ?/gm,""),c=(this.tree,this.toTree(l,["blockquote"])),h=p(c);return h&&h.references&&(delete h.references,v(h)&&c.splice(1,1)),n.push(c),n},referenceDefn:function(t,e){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!t.match(n))return undefined;p(this.tree)||this.tree.splice(1,0,{});var i=p(this.tree);i.references===undefined&&(i.references={});var r=this.loop_re_over_block(n,t,function(t){t[2]&&"<"===t[2][0]&&">"===t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=i.references[t[1].toLowerCase()]={href:t[2]};t[4]!==undefined?e.title=t[4]:t[5]!==undefined&&(e.title=t[5])});return r.length&&e.unshift(f(r,t.trailing)),[]},para:function(t){return[["para"].concat(this.processInline(t))]}},inline:{__oneElement__:function(t,e,n){var i,r;return e=e||this.dialect.inline.__patterns__,(i=new RegExp("([\\s\\S]*?)("+(e.source||e)+")").exec(t))?i[1]?[i[1].length,i[1]]:(i[2]in this.dialect.inline&&(r=this.dialect.inline[i[2]].call(this,t.substr(i.index),i,n||[])),r=r||[i[2].length,i[2]]):[t.length,t]},__call__:function(t,e){function n(t){"string"==typeof t&&"string"==typeof r[r.length-1]?r[r.length-1]+=t:r.push(t)}for(var i,r=[];t.length>0;)i=this.dialect.inline.__oneElement__.call(this,t,e,r),t=t.substr(i.shift()),m(i,n);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(t){return this.dialect.inline.__escape__.exec(t)?[2,t.charAt(1)]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"===e[2][0]&&">"===e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return e[4]!==undefined&&(n.title=e[4]),[e[0].length,["img",n]]}return(e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function(t){var e=String(t),n=b.call(this,t.substr(1),"]");if(!n)return[1,"["];var i,r,o=1+n[0],s=n[1],a=(t=t.substr(o)).match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var l=a[1];if(o+=a[0].length,l&&"<"===l[0]&&">"===l[l.length-1]&&(l=l.substring(1,l.length-1)),!a[3])for(var c=1,h=0;h<l.length;h++)switch(l[h]){case"(":c++;break;case")":0==--c&&(o-=l.length-h,l=l.substring(0,h))}return r={href:(l=this.dialect.inline.__call__.call(this,l,/\\/)[0])||""},a[3]!==undefined&&(r.title=a[3]),i=["link",r].concat(s),[o,i]}return(a=t.match(/^\s*\[(.*?)\]/))?(o+=a[0].length,i=["link_ref",r={ref:(a[1]||String(s)).toLowerCase(),original:e.substr(0,o)}].concat(s),[o,i]):1===s.length&&"string"==typeof s[0]?(i=["link_ref",r={ref:s[0].toLowerCase(),original:e.substr(0,o)},s[0]],[o,i]):[1,"["]},"<":function(t){var e;return null!==(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"===e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}}};y.inline["**"]=l("strong","**"),y.inline.__=l("strong","__"),y.inline["*"]=l("em","*"),y.inline._=l("em","_"),d.dialects.Gruber=y,d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline);var _=g.subclassDialect(y);p=h.extract_attr,m=h.forEach;_.processMetaHash=function(t){for(var e=c(t),n={},i=0;i<e.length;++i)if(/^#/.test(e[i]))n.id=e[i].substring(1);else if(/^\./.test(e[i]))n["class"]?n["class"]=n["class"]+e[i].replace(/./," "):n["class"]=e[i].substring(1);else if(/\=/.test(e[i])){var r=e[i].split(/\=/);n[r[0]]=r[1]}return n},_.block.document_meta=function(t){if(t.lineNumber>1)return undefined;if(!t.match(/^(?:\w+:.*\n)*\w+:.*$/))return undefined;p(this.tree)||this.tree.splice(1,0,{});var e=t.split(/\n/);for(var n in e){var i=e[n].match(/(\w+):\s*(.*)$/),r=i[1].toLowerCase(),o=i[2];this.tree[1][r]=o}return[]},_.block.block_meta=function(t){var e=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!e)return undefined;var n,i=this.dialect.processMetaHash(e[2]);if(""===e[1]){var r=this.tree[this.tree.length-1];if(n=p(r),"string"==typeof r)return undefined;for(var o in n||(n={},r.splice(1,0,n)),i)n[o]=i[o];return[]}var s=t.replace(/\n.*$/,""),a=this.processBlock(s,[]);for(var o in(n=p(a[0]))||(n={},a[0].splice(1,0,n)),i)n[o]=i[o];return a},_.block.definition_list=function(t,e){var n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,r=["dl"];if(!(a=t.match(i)))return undefined;for(var o=[t];e.length&&i.exec(e[0]);)o.push(e.shift());for(var s=0;s<o.length;++s){var a,l=(a=o[s].match(i))[1].replace(/\n$/,"").split(/\n/),c=a[2].split(/\n:\s+/);for(n=0;n<l.length;++n)r.push(["dt",l[n]]);for(n=0;n<c.length;++n)r.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[r]},_.block.table=function(t){var e,n,i=function(t,e){(e=e||"\\s").match(/^[\\|\[\]{}?*.+^$]$/)&&(e="\\"+e);for(var n,i=[],r=new RegExp("^((?:\\\\.|[^\\\\"+e+"])*)"+e+"(.*)");n=t.match(r);)i.push(n[1]),t=n[2];return i.push(t),i},r=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,o=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(n=t.match(r))n[3]=n[3].replace(/^\s*\|/gm,"");else if(!(n=t.match(o)))return undefined;var s=["table",["thead",["tr"]],["tbody"]];n[2]=n[2].replace(/\|\s*$/,"").split("|");var a=[];for(m(n[2],function(t){t.match(/^\s*-+:\s*$/)?a.push({align:"right"}):t.match(/^\s*:-+\s*$/)?a.push({align:"left"}):t.match(/^\s*:-+:\s*$/)?a.push({align:"center"}):a.push({})}),n[1]=i(n[1].replace(/\|\s*$/,""),"|"),e=0;e<n[1].length;e++)s[1][1].push(["th",a[e]||{}].concat(this.processInline(n[1][e].trim())));return m(n[3].replace(/\|\s*$/gm,"").split("\n"),function(t){var n=["tr"];for(t=i(t,"|"),e=0;e<t.length;e++)n.push(["td",a[e]||{}].concat(this.processInline(t[e].trim())));s[2].push(n)},this),[s]},_.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var r=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!r)return[2,"{:"];var o=this.dialect.processMetaHash(r[1]),s=p(i);for(var a in s||(s={},i.splice(1,0,s)),o)s[a]=o[a];return[r[0].length,""]},d.dialects.Maruku=_,d.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline),t.Markdown=d,t.parse=d.parse,t.toHTML=d.toHTML,t.toHTMLTree=d.toHTMLTree,t.renderJsonML=d.renderJsonML}((window.markdown={},window.markdown)),"object"!=typeof he&&"function"==typeof require)var he=require("he");var toMarkdown=function(t){function e(t,e){var n="void"===e.type?"<"+e.tag+"\\b([^>]*)\\/?>":"<"+e.tag+"\\b([^>]*)>([\\s\\S]*?)<\\/"+e.tag+">",i=new RegExp(n,"gi");return"string"==typeof e.replacement?t.replace(i,e.replacement):t.replace(i,function(t,n,i,r){return e.replacement.call(this,t,n,i,r)})}function n(t){return new RegExp(t+"\\s*=\\s*[\"']?([^\"']*)[\"']?","i")}function i(t){return"\n\n"+(t=t.replace(/<(ul|ol)\b[^>]*>([\s\S]*?)<\/\1>/gi,function(t,e,n){var i=n.split("</li>");for(i.splice(i.length-1,1),a=0,l=i.length;a<l;a++)if(i[a]){var r="ol"===e?a+1+".  ":"*   ";i[a]=i[a].replace(/\s*<li[^>]*>([\s\S]*)/i,function(t,e){return e=(e=(e=e.replace(/^\s+/,"")).replace(/\n\n/g,"\n\n    ")).replace(/\n([ ]*)+(\*|\d+\.) /g,"\n$1    $2 "),r+e})}return i.join("\n")})).replace(/[ \t]+\n|\s+$/g,"")}function r(t){return t=t.replace(/<blockquote\b[^>]*>([\s\S]*?)<\/blockquote>/gi,function(t,e){return e=(e=(e=o(e=e.replace(/^\s+|\s+$/g,""))).replace(/^/gm,"> ")).replace(/^(>([ \t]{2,}>)+)/gm,"> >")})}function o(t){return t=(t=(t=t.replace(/^[\t\r\n]+|[\t\r\n]+$/g,"")).replace(/\n\s+\n/g,"\n\n")).replace(/\n{3,}/g,"\n\n")}for(var s=[{patterns:"p",replacement:function(t,e,n){return n?"\n\n"+n+"\n":""}},{patterns:"br",type:"void",replacement:"\n"},{patterns:"h([1-6])",replacement:function(t,e,n,i){for(var r="",o=0;o<e;o++)r+="#";return"\n\n"+r+" "+i+"\n"}},{patterns:"hr",type:"void",replacement:"\n\n* * *\n"},{patterns:"a",replacement:function(t,e,i){var r=e.match(n("href")),o=e.match(n("title"));return r?"["+i+"]("+r[1]+(o&&o[1]?' "'+o[1]+'"':"")+")":t}},{patterns:["b","strong"],replacement:function(t,e,n){return n?"**"+n+"**":""}},{patterns:["i","em"],replacement:function(t,e,n){return n?"_"+n+"_":""}},{patterns:"code",replacement:function(t,e,n){return n?"`"+he.decode(n)+"`":""}},{patterns:"img",type:"void",replacement:function(t,e){var i=e.match(n("src")),r=e.match(n("alt")),o=e.match(n("title"));return"!["+(r&&r[1]?r[1]:"")+"]("+i[1]+(o&&o[1]?' "'+o[1]+'"':"")+")"}}],a=0,l=s.length;a<l;a++)if("string"==typeof s[a].patterns)t=e(t,{tag:s[a].patterns,replacement:s[a].replacement,type:s[a].type});else for(var c=0,h=s[a].patterns.length;c<h;c++)t=e(t,{tag:s[a].patterns[c],replacement:s[a].replacement,type:s[a].type});t=(t=t.replace(/<pre\b[^>]*>`([\s\S]*)`<\/pre>/gi,function(t,e){var n=he.decode(e);return"\n\n    "+(n=(n=n.replace(/^\t+/g,"  ")).replace(/\n/g,"\n    "))+"\n"})).replace(/^(\s{0,3}\d+)\. /g,"$1\\. ");for(var u=/<(ul|ol)\b[^>]*>(?:(?!<ul|<ol)[\s\S])*?<\/\1>/gi;t.match(u);)t=t.replace(u,function(t){return i(t)});for(var d=/<blockquote\b[^>]*>((?:(?!<blockquote)[\s\S])*?)<\/blockquote>/gi;t.match(d);)t=t.replace(d,function(t){return r(t)});return o(t)};"object"==typeof exports&&(exports.toMarkdown=toMarkdown),function(t){"use strict";var e=function(e,n){this.$ns="bootstrap-markdown",this.$element=t(e),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=t.extend(!0,{},t.fn.markdown.defaults,n,this.$element.data(),this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};e.prototype={constructor:e,__alterButtons:function(e,n){var i=this.$handler,r="all"==e,o=this;t.each(i,function(t,i){0==(!r&&i.indexOf(e)<0)&&n(o.$editor.find('button[data-handler="'+i+'"]'))})},__buildButtons:function(e,n){var i,r=this.$ns,o=this.$handler,s=this.$callback;for(i=0;i<e.length;i++){var a,l=e[i];for(a=0;a<l.length;a++){var c,h=l[a].data,u=t("<div/>",{"class":"btn-group"});for(c=0;c<h.length;c++){var d,f,p=h[c],g=r+"-"+p.name,m=this.__getIcon(p.icon),v=p.btnText?p.btnText:"",b=p.btnClass?p.btnClass:"btn",y=p.tabIndex?p.tabIndex:"-1",_="undefined"!=typeof p.hotkey?p.hotkey:"",$="undefined"!=typeof jQuery.hotkeys&&""!==_?" ("+_+")":"";(d=t("<button></button>")).text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(b),b.match(/btn\-(primary|success|info|warning|danger|link)/)&&d.removeClass("btn-default"),d.attr({type:"button",title:this.__localize(p.title)+$,tabindex:y,"data-provider":r,"data-handler":g,"data-hotkey":_}),1==p.toggle&&d.attr("data-toggle","button"),(f=t("<span/>")).addClass(m),f.prependTo(d),u.append(d),o.push(g),s.push(p.callback)}n.append(u)}}return n},__setListener:function(){var e=void 0!==this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=e?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",t.proxy(this.focus,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)).on("change",t.proxy(this.change,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",t.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(e){var n=t(e.currentTarget),i=this.$handler,r=this.$callback,o=n.attr("data-handler"),s=r[i.indexOf(o)];t(e.currentTarget).focus(),s(this),this.change(this),o.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},__localize:function(e){var n=t.fn.markdown.messages,i=this.$options.language;return void 0!==n&&"undefined"!=typeof n[i]&&"undefined"!=typeof n[i][e]?n[i][e]:e},__getIcon:function(t){return"object"==typeof t?t[this.$options.iconlibrary]:t},setFullscreen:function(e){var n=this.$editor,i=this.$textarea;!0===e?(n.addClass("md-fullscreen-mode"),t("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),t("body").removeClass("md-nooverflow")),this.$isFullscreen=e,i.focus()},showEditor:function(){var e,n=this,i=this.$ns,r=this.$element,o=(r.css("height"),r.css("width"),this.$editable),s=this.$handler,a=this.$callback,l=this.$options,c=t("<div/>",{"class":"md-editor",click:function(){n.focus()}});if(null==this.$editor){var h=t("<div/>",{"class":"md-header btn-toolbar"}),u=[];if(l.buttons.length>0&&(u=u.concat(l.buttons[0])),l.additionalButtons.length>0&&(u=u.concat(l.additionalButtons[0])),l.reorderButtonGroups.length>0&&(u=u.filter(function(t){return l.reorderButtonGroups.indexOf(t.name)>-1}).sort(function(t,e){return l.reorderButtonGroups.indexOf(t.name)<l.reorderButtonGroups.indexOf(e.name)?-1:l.reorderButtonGroups.indexOf(t.name)>l.reorderButtonGroups.indexOf(e.name)?1:0})),u.length>0&&(h=this.__buildButtons([u],h)),l.fullscreen.enable&&h.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!0)}),c.append(h),r.is("textarea"))r.before(c),(e=r).addClass("md-input"),c.append(e);else{var d="function"==typeof toMarkdown?toMarkdown(r.html()):r.html(),f=t.trim(d);e=t("<textarea/>",{"class":"md-input",val:f}),c.append(e),o.el=r,o.type=r.prop("tagName").toLowerCase(),o.content=r.html(),t(r[0].attributes).each(function(){o.attrKeys.push(this.nodeName),o.attrValues.push(this.nodeValue)}),r.replaceWith(c)}var p=t("<div/>",{"class":"md-footer"}),g=!1,m="";if(l.savable){g=!0;var v="cmdSave";s.push(v),a.push(l.onSave),p.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+v+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(m="function"==typeof l.footer?l.footer(this):l.footer,""!==t.trim(m)&&(g=!0,p.append(m)),g&&c.append(p),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(c.css("display","table"),e.css("width",l.width+"px")):c.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var b=l.height;h&&(b=Math.max(0,b-h.outerHeight())),p&&(b=Math.max(0,b-p.outerHeight())),e.css("height",b+"px")}else c.addClass(l.height);this.$editor=c,this.$textarea=e,this.$editable=o,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',t.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&h.find('[data-provider="bootstrap-markdown"]').each(function(){var n=t(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&e.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&!1!==l.fullscreen&&(this.$editor.append('          <div class="md-fullscreen-controls">            <a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a>          </div>'),this.$editor.on("click",".exit-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!1)})),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.onShow(this),this},parseContent:function(){var t,e=this.$options.onPreview(this);if("string"==typeof e)t=e;else{var n=this.$textarea.val();t="object"==typeof markdown?markdown.toHTML(n):"function"==typeof marked?marked(n):n}return t},showPreview:function(){this.$options;var e,n=this.$textarea,i=n.next(),r=t("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});return this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),e=this.parseContent(),r.html(e),i&&"md-footer"==i.attr("class")?r.insertBefore(i):n.parent().append(r),r.css({width:n.outerWidth()+"px",height:n.outerHeight()+"px"}),this.$options.resize&&r.css("resize",this.$options.resize),n.hide(),r.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(t){return this.$textarea.val(t),this},findSelection:function(t){var e;if((e=this.getContent().indexOf(t))>=0&&t.length>0){var n,i=this.getSelection();return this.setSelection(e,e+t.length),n=this.getSelection(),this.setSelection(i.start,i.end),n}return null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||function(){return null})()},setSelection:function(t,e){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=t,n.selectionEnd=e}||function(){return null})()},replaceSelection:function(t){var e=this.$textarea[0];return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),e.selectionStart=e.value.length,this}||function(){return e.value+=t,jQuery(e)})()},getNextTab:function(){if(0==this.$nextTab.length)return null;var t,e=this.$nextTab.shift();return"function"==typeof e?t=e():"object"==typeof e&&e.length>0&&(t=e),t},setNextTab:function(t,e){if("string"==typeof t){var n=this;this.$nextTab.push(function(){return n.findSelection(t)})}else if("number"==typeof t&&"number"==typeof e){var i=this.getSelection();this.setSelection(t,e),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(t){var e=[];return"string"==typeof t?e.push(t):e=t,e},enableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.removeAttr("disabled")})}),this},disableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.attr("disabled","disabled")})}),this},hideButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.addClass("hidden")})}),this},showButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.removeClass("hidden")})}),this},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},keyup:function(t){var e=!1;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(null!=(n=this.getNextTab())){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),e=!0}else{var r=this.getSelection();r.start==r.end&&r.end==this.getContent().length?e=!1:(this.setSelection(this.getContent().length,this.getContent().length),e=!0)}break;case 13:e=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),e=!1;break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault()),this.$options.onChange(this)},change:function(){return this.$options.onChange(this),this},focus:function(){var e=this.$options,n=(e.hideable,this.$editor);return n.addClass("active"),t(document).find(".md-editor").each(function(){var e;t(this).attr("id")!=n.attr("id")&&(null==(e=t(this).find("textarea").data("markdown"))&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur())}),e.onFocus(this),this},blur:function(){var e=this.$options,n=e.hideable,i=this.$editor,r=this.$editable;if(i.hasClass("active")||0==this.$element.parent().length){if(i.removeClass("active"),n)if(null!=r.el){var o=t("<"+r.type+"/>"),s=this.getContent(),a="object"==typeof markdown?markdown.toHTML(s):s;t(r.attrKeys).each(function(t){o.attr(r.attrKeys[t],r.attrValues[t])}),o.html(a),i.replaceWith(o)}else i.hide();e.onBlur(this)}return this}};var n=t.fn.markdown;t.fn.markdown=function(n){return this.each(function(){var i=t(this),r=i.data("markdown"),o="object"==typeof n&&n;r||i.data("markdown",r=new e(this,o))})},t.fn.markdown.messages={},t.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0==i.length?t.__localize("strong text"):i.text,"**"==r.substr(i.start-2,2)&&"**"==r.substr(i.end,2)?(t.setSelection(i.start-2,i.end+2),t.replaceSelection(e),n=i.start-2):(t.replaceSelection("**"+e+"**"),n=i.start+2),t.setSelection(n,n+e.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0==i.length?t.__localize("emphasized text"):i.text,"_"==r.substr(i.start-1,1)&&"_"==r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):(t.replaceSelection("_"+e+"_"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-font","fa-3":"icon-font"},callback:function(t){var e,n,i,r,o=t.getSelection(),s=t.getContent();e=0==o.length?t.__localize("heading text"):o.text+"\n",i=4,"### "==s.substr(o.start-i,i)||(i=3,"###"==s.substr(o.start-i,i))?(t.setSelection(o.start-i,o.end),t.replaceSelection(e),n=o.start-i):o.start>0&&((r=s.substr(o.start-1,1))&&"\n"!=r)?(t.replaceSelection("\n\n### "+e),n=o.start+6):(t.replaceSelection("### "+e),n=o.start+4),t.setSelection(n,n+e.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",
fa:"fa fa-link","fa-3":"icon-link"},callback:function(e){var n,i,r,o=e.getSelection();e.getContent();if(n=0==o.length?e.__localize("enter link description here"):o.text,null!=(r=prompt(e.__localize("Insert Hyperlink"),"http://"))&&""!=r&&"http://"!=r&&"http"==r.substr(0,4)){var s=t("<div>"+r+"</div>").text();e.replaceSelection("["+n+"]("+s+")"),i=o.start+1,e.setSelection(i,i+n.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(e){var n,i,r,o=e.getSelection();e.getContent();if(n=0==o.length?e.__localize("enter image description here"):o.text,null!=(r=prompt(e.__localize("Insert Image Hyperlink"),"http://"))&&""!=r&&"http://"!=r&&"http"==r.substr(0,4)){var s=t("<div>"+r+"</div>").text();e.replaceSelection("!["+n+"]("+s+' "'+e.__localize("enter image title here")+'")'),i=o.start+2,e.setNextTab(e.__localize("enter image title here")),e.setSelection(i,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0==r.length)n=e.__localize("list text here"),e.replaceSelection("- "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("- "+n),i=r.start+2;else{var o=[];n=(o=r.text.split("\n"))[0],t.each(o,function(t,e){o[t]="- "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0==r.length)n=e.__localize("list text here"),e.replaceSelection("1. "+n),i=r.start+3;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("1. "+n),i=r.start+3;else{var o=[];n=(o=r.text.split("\n"))[0],t.each(o,function(t,e){o[t]="1. "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+5}e.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0==i.length?t.__localize("code text here"):i.text,"`"==r.substr(i.start-1,1)&&"`"==r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):(t.replaceSelection("`"+e+"`"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0==r.length)n=e.__localize("quote here"),e.replaceSelection("> "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("> "+n),i=r.start+2;else{var o=[];n=(o=r.text.split("\n"))[0],t.each(o,function(t,e){o[t]="> "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-ss btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(t){0==t.$isPreview?t.showPreview():t.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(){},onPreview:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){},onChange:function(){},onFullscreen:function(){}},t.fn.markdown.Constructor=e,t.fn.markdown.noConflict=function(){return t.fn.markdown=n,this};var i=function(t){var e=t;e.data("markdown")?e.data("markdown").showEditor():e.markdown()},r=function(e){var n,i=!1,r=t(e.currentTarget);"focusin"!=e.type&&"click"!=e.type||1!=r.length||"object"!=typeof r[0]||(n=r[0].activeElement,t(n).data("markdown")||(void 0===t(n).parent().parent().parent().attr("class")||t(n).parent().parent().parent().attr("class").indexOf("md-editor")<0?(void 0===t(n).parent().parent().attr("class")||t(n).parent().parent().attr("class").indexOf("md-editor")<0)&&(i=!0):i=!1),i&&t(document).find(".md-editor").each(function(){var e,i=t(n).parent();t(this).attr("id")!=i.attr("id")&&(null==(e=t(this).find("textarea").data("markdown"))&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur())}),e.stopPropagation())};t(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){i(t(this)),e.preventDefault()}).on("click",function(t){r(t)}).on("focusin",function(t){r(t)}).ready(function(){t('textarea[data-provide="markdown"]').each(function(){i(t(this))})})}(window.jQuery),$(document).ready(function(){function t(){$(".trending-tab-load-more-services").removeClass("disabled"),$(".trending-tab-load-more-stacks").removeClass("disabled"),$(".featured-tab-load-more-stacks").removeClass("disabled"),$(".trending-tab-load-more-services").click(function(){$(this).addClass("disabled")}),$(".trending-tab-load-more-stacks").click(function(){$(this).addClass("disabled")}),$(".featured-tab-load-more-stacks").click(function(){$(this).addClass("disabled")}),$(".has-bootstrap-markdown").markdown({autofocus:!1,savable:!1,iconlibrary:"fa"}),$("#sp-sidebar").affix({offset:{top:350,bottom:550}}),$("#trending-sidebar").affix({offset:{bottom:0}}),$("#review-comments").collapse({}),$(".source-link-click").click(function(){var t=$(this).data("stack-item-id"),e=$('div[data-bottom-stack-item-id="'+t+'"]');setTimeout(function(){$("body").scrollTo(e),e.animate({"background-color":"#8A8A8A"}).delay(1e3).animate({"background-color":"transparent"})},400)}),$(".reason-check").change(function(){this.checked?$(this).next().css("color","#0690FA"):$(this).next().css("color","black")})}$(".trending-tab-load-more-services").click(function(){$(this).addClass("disabled")}),$(".trending-tab-load-more-stacks").click(function(){$(this).addClass("disabled")}),$(".featured-tab-load-more-stacks").click(function(){$(this).addClass("disabled")}),$('[data-toggle="tabajax"]').click(function(e){if(e.preventDefault(),content=$(".tab-content"),$("#loading-tab").length<1){var n=$("<span id='loading-tab'>Loading...</span>");content.prepend(n)}var i=$(this).attr("data-href"),r=$(this).attr("data-target");return $(r).empty(),$.get(i,function(e){$(r).html(e),$("#loading-tab").remove(),t()}),$(this).tab("show"),!1})}),$(document).ready(function(){"undefined"!=typeof uploadcare&&$.each(uploadcare.start(),function(t,e){function n(t){e.onChange.remove(n),"rejected"==t.state()&&t.fail(function(t){if("baddata"==t){var n=$(e.inputElement).val();e.value(null),$(e.inputElement).val(n)}})}e.onChange.add(n)})}),$(function(){$("[role=uploadcare-uploader][data-file-types]").each(function(){var t=$(this);"undefined"!=typeof uploadcare&&uploadcare.Widget(t).validators.push(fileTypeLimit(t.data("file-types")))})}),UPLOADCARE_LOCALE_TRANSLATIONS={errors:{fileType:"Only image files are accepted. Please try again with another file."},dialog:{tabs:{preview:{error:{fileType:{title:"Only image files are accepted.",text:"Please try again with another file.",back:"Choose image"}}}}}},jQuery(function(){return $(".tweet-review-dialog").click(),$(".has-select2").select2(),$(".has-select2-max-4").select2({maximumSelectionSize:4}),$(".trending-tab-load-more-services").removeClass("disabled"),$(".trending-tab-load-more-stacks").removeClass("disabled"),$(".featured-tab-load-more-stacks").removeClass("disabled"),$(document).on("click","[data-behavior~=submit_on_check]",function(){nativeFormEl=$(this).closest("form")[0],Rails.fire(nativeFormEl,"submit")}),$(document).on("click","[data-behavior~=signin_on_click]",function(){"undefined"!=typeof SigninModal&&SigninModal.show()}),$(document).on("click",".submit-ajax-reason",function(t){t.preventDefault();let e="";e=$(t.toElement).prev().prev().prev().is("input")?$(t.toElement).prev().prev().prev().val():$(t.toElement).prev().prev().val();const n=$(t.toElement).parent().prev().prev().val();return $.ajax({url:"/reasons",type:"post",data:{"reason[service_id]":n,"reason[text]":e}})}),$(".new_customer_verification").on("ajax:success",function(t){var e=t.originalEvent.detail,n=e[0];e[1],e[2];const i=`<tr><td>${n.customer_source}</td><td>${n.customer_name}</td><td>${n.processed}</td></tr>`;return $(".customer_verifications_table").append(i),$("#customer_verification_customer_source").val(""),$("#customer_verification_customer_name").val("")}),$(".verify-email-belongs-to-service-url").blur(()=>$.post("/services/verify_email_belongs_to_domain",{email:$(".verify-email-belongs-to-service-url").val(),service_id:$(".service_id").val()}).then(function(t){return t.owns_domain?($(".company_website_url").css("border","1px solid green"),$(".verify-website-ownership").css("border","1px solid green"),$(".email_belongs_to_domain").val("yes"),$(".company_email_valid").removeClass("hidden"),$(".company_email_invalid").addClass("hidden")):($(".company_website_url").css("border","1px solid red"),$(".verify-website-ownership").css("border","1px solid red"),$(".email_belongs_to_domain").val("no"),$(".company_email_valid").addClass("hidden"),$(".company_email_invalid").removeClass("hidden"))}))});